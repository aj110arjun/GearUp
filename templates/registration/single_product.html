{% extends "registration/base.html" %}
{% load static %}
{% block title %}
  GearUp - {{product.name}} Page
{% endblock title %}
{% block csslink %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/single_product.css' %}">
{% endblock csslink %}

{% block content %}
    
<div class="container mt-5">
  <div class="row align-items-start">
    <div class="d-flex justify-content-center align-items-start gap-3">
      <div class="image-container position-relative">
        <img id="mainProductImage" src="{{ product.image.url }}" class="img-fluid rounded shadow" alt="Main Product">
        <div id="zoomLens" class="zoom-lens"></div>
      </div>
      <div id="zoomResult" class="zoom-result"></div>
    </div>

      <div class="d-flex justify-content-center gap-2 mt-3 flex-wrap">
        <img src="{{ product.image.url }}" class="thumb active-thumb" onclick="switchMainImage(this)" alt="Main Image Thumbnail">
        {% for images in product.additional_images.all %}
          <img src="{{ images.image.url }}" class="thumb" onclick="switchMainImage(this)" alt="Additional Image Thumbnail">
        {% endfor %}
      </div>
    </div>

    <div class="col-md-6">
      <div class="product-title">{{ product.name|title }}</div>
       {% if product.stock == 0 %}
          <span class="badge bg-danger">Out of Stock</span>
        {% elif product.stock < 100 %}
          <span class="text-danger">Limited Stocks</span>
        {% else %}
          <span class="badge bg-success">In Stocks</span>
        {% endif %}
      <div class="product-category mb-2">{{ product.category.name }}</div>
      <div class="product-description mb-3">{{ product.description }}</div>
      <div class="price mb-4">‚Çπ {{ product.price }}/-</div>

      <div class="d-flex align-items-center gap-3">
       
        <form method="post" action="{% url 'add_to_cart' product.product_id %}">
          {% csrf_token %}
          <label for="variant">Choose Variant:</label>
          <select name="variant_id" id="variant">
            {% for variant in product.variants.all %}
              <option value="{{ variant.id }}">
                {{ variant.size }} - {{ variant.color }} - ‚Çπ{{ variant.price }}
              </option>
            {% endfor %}
          </select>
          {% if product.stock == 0 %}
            <button class="btn btn-dark disabled" type="submit">Out of Stocks</button>
          {% else %}

            {% if in_cart %}
              <a href="{% url 'view_cart' %}" class="btn btn-success">Go to Cart</a>
            {% else %}
              <button class="btn btn-dark" type="submit">Add to Cart</button>
            {% endif %}
          {% endif %}

        </form>
        {% if in_wishlist %}
          <a href="{% url 'view_wishlist' %}" class="btn btn-outline-success">üíö Go to Wishlist</a>
        {% else %}
          <a href="{% url 'add_to_wishlist' product.product_id %}" class="btn btn-outline-primary">‚ù§Ô∏è Add to Wishlist</a>
        {% endif %}

       

      </div>
    </div>
  </div>
</div>

<!-- Script -->
<script src="{% static 'js/single_product.js' %}">

</script>

{% endblock content %}

